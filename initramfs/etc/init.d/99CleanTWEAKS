x4#!/system/bin/sh
# CleanTWEAKS!

# Optimized remounts
busybox mount -o remount,noatime,noauto_da_alloc,nodiratime,barrier=0,nobh /system
busybox mount -o remount,noatime,noauto_da_alloc,nosuid,nodev,nodiratime,barrier=0,nobh /data
busybox mount -o remount,noatime,noauto_da_alloc,nosuid,nodev,nodiratime,barrier=0,nobh /cache

#Disable FSync
echo "0" > /sys/devices/virtual/misc/fsynccontrol/fsync_enabled

su insmod -q /system/lib/modules/md4.ko

#CPU and VM Tweaks
echo "80" > /sys/devices/system/cpu/cpufreq/interactive/go_maxspeed_load
/system/xbin/sysctl -w fs.file-max=524288
/system/xbin/sysctl -w fs.inotify.max_queued_events=32000
/system/xbin/sysctl -w fs.inotify.max_user_instances=256
/system/xbin/sysctl -w fs.inotify.max_user_watches=10240
/system/xbin/sysctl -w fs.lease-break-time=10
/system/xbin/sysctl -w kernel.random.read_wakeup_threshold=128
/system/xbin/sysctl -w kernel.random.write_wakeup_threshold=256
/system/xbin/sysctl -w kernel.sched_latency_ns=18000000
/system/xbin/sysctl -w kernel.sched_wakeup_granularity_ns=3000000
/system/xbin/sysctl -w kernel.threads-max=524288
/system/xbin/sysctl -w net.core.rmem_max=524288
/system/xbin/sysctl -w net.core.wmem_max=524288
/system/xbin/sysctl -w vm.dirty_background_ratio=70
/system/xbin/sysctl -w vm.dirty_expire_centisecs=250
/system/xbin/sysctl -w vm.dirty_ratio=97
/system/xbin/sysctl -w vm.drop_caches=3
/system/xbin/sysctl -w vm.min_free_kbytes=4096
/system/xbin/sysctl -w vm.vfs_cache_pressure=1
echo "0" > /proc/sys/vm/oom_kill_allocating_task;
echo "0" > /proc/sys/vm/panic_on_oom;
echo "0" > /proc/sys/vm/laptop_mode;
echo "0" > /proc/sys/vm/swappiness;
